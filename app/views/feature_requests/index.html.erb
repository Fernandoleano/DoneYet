<div class="min-h-screen bg-gray-900 pt-24 pb-12 relative overflow-hidden">
  <!-- Dynamic Background -->
  <div class="absolute inset-0 bg-[#0a0a0a] z-0"></div>
  <div class="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-10 z-0"></div>

  <div class="max-w-4xl mx-auto px-6 relative z-10">
    <div class="text-center mb-12">
      <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 text-xs font-bold uppercase tracking-wider mb-6">
        Feature Voting
      </div>
      <h1 class="text-4xl md:text-5xl font-black text-white mb-4">Shaping the Future</h1>
      <p class="text-xl text-gray-400 max-w-2xl mx-auto">
        Vote on the features you want to see next. The winner gets priority deployment.
      </p>
    </div>

    <!-- Submission Form -->
    <div class="bg-gray-800/50 backdrop-blur-xl border border-gray-700/50 rounded-2xl p-6 md:p-8 mb-12 shadow-2xl">
      <h3 class="text-lg font-bold text-white mb-4">Request New Feature</h3>
      <%= form_with model: @new_feature, local: true, class: "space-y-4" do |f| %>
        <% if @new_feature.errors.any? %>
          <div class="bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-red-400 text-sm mb-4">
            <%= @new_feature.errors.full_messages.join(", ") %>
          </div>
        <% end %>

        <div>
          <%= f.text_field :title, placeholder: "Feature Title", class: "w-full bg-gray-900/50 border border-gray-700 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all font-medium" %>
        </div>
        <div>
          <%= f.text_area :description, rows: 3, placeholder: "Brief description of the feature...", class: "w-full bg-gray-900/50 border border-gray-700 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all font-medium resize-none" %>
        </div>
        <div class="flex justify-end">
          <%= f.button type: :submit, class: "px-6 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-lg transition shadow-lg shadow-indigo-500/20 flex items-center gap-2" do %>
            <span>Submit Request</span>
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
          <% end %>
        </div>
      <% end %>
    </div>

    <!-- Feature List -->
    <div class="space-y-4">
      <% @features.each_with_index do |feature, index| %>
        <div class="group bg-gray-800 border border-gray-700 hover:border-indigo-500/50 rounded-xl p-6 transition-all duration-300 relative overflow-hidden">
          <% if index == 0 %>
            <div class="absolute top-0 right-0 bg-yellow-500/20 text-yellow-500 text-[10px] font-bold px-2 py-0.5 rounded-bl-lg uppercase border-l border-b border-yellow-500/20">
              Current Leader
            </div>
          <% end %>
          
          <div class="flex items-start gap-4">
            <!-- Vote Button -->
            <% voted = Current.user && feature.feature_votes.exists?(user: Current.user) %>
            <%= button_to upvote_feature_request_path(feature), method: :post, disabled: voted, class: "flex flex-col items-center justify-center w-16 h-16 rounded-xl bg-gray-900 border #{voted ? 'border-indigo-500 bg-indigo-500/10 cursor-default' : 'border-gray-700 group-hover:border-indigo-500/30 group-hover:bg-indigo-900/10 cursor-pointer'} transition-colors" do %>
              <svg class="w-6 h-6 mb-1 transition-colors #{voted ? 'text-indigo-400' : (index == 0 ? 'text-yellow-500' : 'text-gray-500 group-hover:text-indigo-400')}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>
              <span class="font-black text-white text-lg"><%= feature.votes_count %></span>
            <% end %>

            <div class="flex-1">
              <h3 class="text-xl font-bold text-white mb-2 group-hover:text-indigo-400 transition-colors"><%= feature.title %></h3>
              <p class="text-gray-400 text-sm leading-relaxed"><%= feature.description %></p>
            </div>
          </div>
        </div>
      <% end %>

      <% if @features.empty? %>
        <div class="text-center py-12 text-gray-500">
          <p>No features requested yet. Be the first!</p>
        </div>
      <% end %>
    </div>
  </div>
</div>
